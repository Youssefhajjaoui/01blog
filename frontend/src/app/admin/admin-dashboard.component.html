<app-navbar [currentPage]="'admin'" [searchQuery]="''" (searchChange)="onSearchChange($event)"
    (notificationClick)="onNotificationClick()" (userClick)="onUserClick()" (navigate)="onNavigate($event)">
</app-navbar>

<div class="admin-dashboard">
    <div class="dashboard-container">
        <!-- Header -->
        <div class="dashboard-header">
            <div class="header-content">
                <div class="header-icon">
                    <svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z">
                        </path>
                    </svg>
                </div>
                <div class="header-text">
                    <h1 class="dashboard-title">Admin Dashboard</h1>
                    <p class="dashboard-subtitle">
                        Comprehensive platform management and moderation tools
                    </p>
                </div>
            </div>

            <!-- Quick Actions -->
        </div>

        <!-- Enhanced Stats Overview -->
        <div class="stats-grid">
            <!-- Total Users Card -->
            <div class="stat-card stat-card-blue">
                <div class="stat-header">
                    <div class="stat-icon stat-icon-blue">
                        <svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z">
                            </path>
                        </svg>
                    </div>
                    <span class="stat-badge">
                        +{{ getTodayUsers() }} today
                    </span>
                </div>
                <div class="stat-content">
                    <p class="stat-label">Total Users</p>
                    <p class="stat-value">{{ stats()?.totalUsers || 0 }}</p>
                    <div class="stat-details">
                        <span class="stat-detail">
                            <div class="status-dot status-active"></div>
                            {{ stats()?.activeUsers || 0 }} active
                        </span>
                        <span class="stat-detail">
                            <div class="status-dot status-banned"></div>
                            {{ stats()?.bannedUsers || 0 }} banned
                        </span>
                    </div>
                </div>
            </div>

            <!-- Total Posts Card -->
            <div class="stat-card stat-card-green">
                <div class="stat-header">
                    <div class="stat-icon stat-icon-green">
                        <svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z">
                            </path>
                        </svg>
                    </div>
                    <span class="stat-badge">
                        +{{ getTodayPosts() }} today
                    </span>
                </div>
                <div class="stat-content">
                    <p class="stat-label">Total Posts</p>
                    <p class="stat-value">{{ stats()?.totalPosts || 0 }}</p>
                    <div class="progress-container">
                        <div class="progress-bar">
                            <div class="progress-fill progress-green" style="width: 75%"></div>
                        </div>
                        <p class="progress-text">75% approved content</p>
                    </div>
                </div>
            </div>

            <!-- Pending Reports Card -->
            <div class="stat-card stat-card-red">
                <div class="stat-header">
                    <div class="stat-icon stat-icon-red">
                        <svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z">
                            </path>
                        </svg>
                    </div>
                    <span class="stat-badge stat-badge-critical">
                        {{ stats()?.criticalReports || 0 }} critical
                    </span>
                </div>
                <div class="stat-content">
                    <p class="stat-label">Pending Reports</p>
                    <p class="stat-value">{{ stats()?.pendingReports || 0 }}</p>
                    <div class="stat-details">
                        <span class="stat-detail">
                            <div class="status-dot status-critical"></div>
                            {{ stats()?.criticalReports || 0 }} critical
                        </span>
                        <span class="stat-detail">
                            <div class="status-dot status-high"></div>
                            {{ (stats()?.pendingReports || 0) - (stats()?.criticalReports || 0) }} high
                        </span>
                    </div>
                </div>
            </div>

            <!-- Platform Health Card -->
            <div class="stat-card stat-card-purple">
                <div class="stat-header">
                    <div class="stat-icon stat-icon-purple">
                        <svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z">
                            </path>
                        </svg>
                    </div>
                    <span class="stat-badge">
                        {{ stats()?.resolvedReports || 0 }} today
                    </span>
                </div>
                <div class="stat-content">
                    <p class="stat-label">Platform Health</p>
                    <p class="stat-value">{{ stats()?.platformHealth || 98.5 }}%</p>
                    <div class="stat-details">
                        <span class="stat-detail">
                            <svg class="detail-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                            </svg>
                            System Online
                        </span>
                        <span class="stat-detail">
                            <svg class="detail-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M5 13l4 4L19 7"></path>
                            </svg>
                            All Services
                        </span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Management Tabs -->
        <div class="tabs-container">
            <!-- Tab Navigation -->
            <div class="tab-navigation">
                <nav class="tab-nav">
                    <button *ngFor="let tab of tabs" (click)="activeTab.set(tab.id)"
                        [class]="activeTab() === tab.id ? 'tab-button tab-active' : 'tab-button'" class="tab-button">
                        <svg class="tab-icon" [innerHTML]="tab.icon"></svg>
                        <span class="tab-text">{{ tab.name }}</span>
                        <span *ngIf="tab.badge && tab.badge > 0" class="tab-badge">
                            {{ tab.badge }}
                        </span>
                    </button>
                </nav>
            </div>

            <!-- Overview Tab -->
            <div *ngIf="activeTab() === 'overview'" class="tab-content">
                <div class="overview-grid">
                    <!-- User Activity Trends -->
                    <div class="overview-card">
                        <div class="card-header">
                            <div class="card-title">
                                <svg class="title-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z">
                                    </path>
                                </svg>
                                <h3>User Activity Trends</h3>
                            </div>
                            <p class="card-description">User engagement and growth metrics</p>

                            <div class="metrics-list">
                                <div class="metric-item">
                                    <span class="metric-label">Active Users</span>
                                    <span class="metric-value">{{ stats()?.activeUsers || 0 }}</span>
                                </div>
                                <div class="progress-container">
                                    <div class="progress-bar">
                                        <div class="progress-fill progress-blue"
                                            [style.width.%]="stats() && stats()!.totalUsers > 0 ? (stats()!.activeUsers / stats()!.totalUsers) * 100 : 0">
                                        </div>
                                    </div>
                                </div>

                                <div class="metric-item">
                                    <span class="metric-label">Users with Warnings</span>
                                    <span class="metric-value">{{ stats()?.bannedUsers || 0 }}</span>
                                </div>
                                <div class="progress-container">
                                    <div class="progress-bar">
                                        <div class="progress-fill progress-yellow"
                                            [style.width.%]="stats() && stats()!.totalUsers > 0 ? (stats()!.bannedUsers / stats()!.totalUsers) * 100 : 0">
                                        </div>
                                    </div>
                                </div>

                                <div class="metric-item">
                                    <span class="metric-label">Content Engagement</span>
                                    <span class="metric-value">87%</span>
                                </div>
                                <div class="progress-container">
                                    <div class="progress-bar">
                                        <div class="progress-fill progress-green" style="width: 87%"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Moderation Overview -->
                    <div class="overview-card">
                        <div class="card-header">
                            <div class="card-title">
                                <svg class="title-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z">
                                    </path>
                                </svg>
                                <h3>Moderation Overview</h3>
                            </div>
                            <p class="card-description">Content moderation and safety metrics</p>

                            <div class="moderation-metrics">
                                <div class="metric-grid">
                                    <div class="metric-box">
                                        <p class="metric-number metric-critical">{{ stats()?.criticalReports || 0 }}</p>
                                        <p class="metric-label-small">Critical Reports</p>
                                    </div>
                                    <div class="metric-box">
                                        <p class="metric-number metric-resolved">{{ stats()?.resolvedReports || 0 }}</p>
                                        <p class="metric-label-small">Resolved Today</p>
                                    </div>
                                </div>

                                <div class="moderation-separator"></div>

                                <div class="moderation-progress">
                                    <div class="progress-item">
                                        <div class="progress-info">
                                            <span class="progress-label">Resolution Rate</span>
                                            <span class="progress-value">94%</span>
                                        </div>
                                        <div class="progress-bar">
                                            <div class="progress-fill progress-green" style="width: 94%"></div>
                                        </div>
                                    </div>

                                    <div class="progress-item">
                                        <div class="progress-info">
                                            <span class="progress-label">Response Time</span>
                                            <span class="progress-value">&lt; 2h avg</span>
                                        </div>
                                        <div class="progress-bar">
                                            <div class="progress-fill progress-blue" style="width: 85%"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Recent Activity -->
                <div class="activity-card">
                    <div class="card-header">
                        <div class="card-title">
                            <svg class="title-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                            <h3>Recent Admin Activity</h3>
                        </div>
                        <p class="card-description">Latest moderation actions and system events</p>

                        <div class="activity-list">
                            <div *ngFor="let activity of recentActivity" class="activity-item">
                                <div class="activity-icon">
                                    <svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                            d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z">
                                        </path>
                                    </svg>
                                </div>
                                <div class="activity-content">
                                    <div class="activity-header">
                                        <span class="activity-action">{{ activity.action }}</span>
                                        <span class="activity-admin">{{ activity.admin }}</span>
                                    </div>
                                    <p class="activity-target">{{ activity.target }}</p>
                                    <p *ngIf="activity.details" class="activity-details">{{ activity.details }}</p>
                                </div>
                                <span class="activity-time">{{ activity.timestamp }}</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Users Tab -->
            <div *ngIf="activeTab() === 'users'" class="tab-content">
                <div class="users-card">
                    <div class="card-header">
                        <div class="card-title">
                            <svg class="title-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z">
                                </path>
                            </svg>
                            <h3>User Management</h3>
                        </div>
                        <p class="card-description">Manage user accounts, permissions, and status</p>
                    </div>

                    <!-- Search and Filters -->
                    <div class="search-filters">
                        <div class="search-container">
                            <svg class="search-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                            </svg>
                            <input type="text" placeholder="Search users by name or email..." [ngModel]="userSearch()"
                                (ngModelChange)="userSearch.set($event)" class="search-input" />
                        </div>
                        <select [ngModel]="userStatusFilter()" (ngModelChange)="userStatusFilter.set($event)"
                            class="status-filter">
                            <option value="all">All Status</option>
                            <option value="active">Active</option>
                            <option value="banned">Banned</option>
                        </select>
                    </div>

                    <!-- Users Table -->
                    <div class="table-container">
                        <table class="users-table">
                            <thead>
                                <tr>
                                    <th>User</th>
                                    <th>Status</th>
                                    <th>Posts</th>
                                    <th>Followers</th>
                                    <th>Last Seen</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor="let user of filteredUsers()" class="table-row">
                                    <td class="user-cell">
                                        <div class="user-info">
                                            <div class="user-avatar">
                                                <img *ngIf="user.avatar" [src]="user.avatar" [alt]="user.username">
                                                <div *ngIf="!user.avatar" class="avatar-placeholder">
                                                    {{ user.username.charAt(0).toUpperCase() }}
                                                </div>
                                            </div>
                                            <div class="user-details">
                                                <div class="user-name">{{ user.username }}</div>
                                                <div class="user-email">{{ user.email }}</div>
                                            </div>
                                        </div>
                                    </td>
                                    <td>
                                        <span [class]="getUserStatusClass(user)" class="status-badge">
                                            {{ getUserStatus(user) }}
                                        </span>
                                    </td>
                                    <td>{{ user.posts }}</td>
                                    <td>{{ user.followers }}</td>
                                    <td>{{ formatDate(user.createdAt) }}</td>
                                    <td class="actions-cell">
                                        <div class="action-buttons">
                                            <button (click)="openBanModal(user)" class="action-btn action-danger"
                                                [disabled]="isAdminUser(user)">Ban</button>
                                            <button (click)="openDeleteModal(user)" class="action-btn action-danger"
                                                [disabled]="isAdminUser(user)">Delete Account</button>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <div *ngIf="filteredUsers().length === 0" class="empty-state">
                        <svg class="empty-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z">
                            </path>
                        </svg>
                        <p class="empty-text">No users found matching your search criteria</p>
                    </div>
                </div>
            </div>

            <!-- Reports Tab -->
            <div *ngIf="activeTab() === 'reports'" class="tab-content">
                <div class="reports-card">
                    <div class="card-header">
                        <div class="card-title">
                            <svg class="title-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z">
                                </path>
                            </svg>
                            <h3>Report Management</h3>
                        </div>
                        <p class="card-description">Review, investigate, and resolve user reports</p>
                    </div>

                    <!-- Reports List -->
                    <div class="reports-list">
                        <p>{{reports().length}}</p>
                        <div *ngFor="let report of reports()" class="report-item"
                            (click)="onClickReport(report.reportedPost?.id || null)">
                            <div class="report-content">
                                <div class="report-header">
                                    <div [class]="getPriorityColor(report.status)" class="priority-dot"></div>
                                    <span [class]="getReportTypeClass(report)" class="report-type">
                                        {{ getReportType(report) }} Report
                                    </span>
                                    <span [class]="getReportStatusClass(report.status)" class="report-status">
                                        {{ report.status }}
                                    </span>
                                    <span class="report-date">{{ formatDate(report.createdAt) }}</span>
                                </div>

                                <div class="report-details">
                                    <div class="report-info">
                                        <div class="info-item">
                                            <span class="info-label">Reported by:</span>
                                            <div class="user-info-small">
                                                <div class="user-avatar-small">
                                                    {{ report.reporter.username.charAt(0).toUpperCase() }}
                                                </div>
                                                <span class="user-name-small">{{ report.reporter.username }}</span>
                                            </div>
                                        </div>

                                        <div class="info-item">
                                            <span class="info-label">Target:</span>
                                            <div class="user-info-small">
                                                <div class="user-avatar-small">
                                                    {{ getTargetUser(report).username.charAt(0).toUpperCase() }}
                                                </div>
                                                <span class="user-name-small">{{ getTargetUser(report).username
                                                    }}</span>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="report-info">
                                        <div class="info-item">
                                            <span class="info-label">Reason:</span>
                                            <span class="reason-badge">
                                                {{ report.reason }}
                                            </span>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="report-actions">
                                <!-- User Report Actions -->
                                <div *ngIf="!report.reportedPost && report.status === 'PENDING'" class="user-actions">
                                    <button (click)="banReportedUser(report)" class="action-btn action-warning">
                                        Ban User
                                    </button>
                                    <button (click)="deleteReportedUser(report)" class="action-btn action-danger">
                                        Delete User
                                    </button>
                                </div>

                                <!-- General Report Actions -->
                                <button *ngIf="report.status === 'PENDING'" (click)="resolveReport(report)"
                                    class="action-btn action-success">
                                    Resolve
                                </button>
                                <button *ngIf="report.status === 'PENDING'" (click)="dismissReport(report)"
                                    class="action-btn action-secondary">
                                    Dismiss
                                </button>
                                <span *ngIf="report.status !== 'PENDING'"
                                    [class]="report.status === 'RESOLVED' ? 'status-resolved' : 'status-dismissed'"
                                    class="status-text">
                                    {{ report.status }}
                                </span>
                            </div>
                        </div>

                        <div *ngIf="reports().length === 0" class="empty-state">
                            <svg class="empty-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z">
                                </path>
                            </svg>
                            <p class="empty-text">No reports found</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Ban User Modal -->
    <div *ngIf="showBanModal()" class="modal-overlay" (click)="closeModals()">
        <div class="modal-content" (click)="$event.stopPropagation()">
            <div class="modal-header">
                <h3 class="modal-title">Ban User</h3>
                <button class="modal-close" (click)="closeModals()">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12">
                        </path>
                    </svg>
                </button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label">User</label>
                    <div class="user-info">
                        <strong>{{ selectedUser()?.username }}</strong> ({{ selectedUser()?.email }})
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label">
                        <input type="checkbox" [ngModel]="isPermanentBan()" (ngModelChange)="isPermanentBan.set($event)"
                            class="checkbox">
                        Permanent Ban
                    </label>
                </div>

                <div class="form-group" *ngIf="!isPermanentBan()">
                    <label class="form-label">Duration</label>
                    <div class="duration-controls">
                        <input type="number" [ngModel]="banDuration()" (ngModelChange)="banDuration.set($event)"
                            class="form-input duration-input" min="1" max="999" placeholder="30">
                        <select [ngModel]="banDurationUnit()" (ngModelChange)="banDurationUnit.set($event)"
                            class="form-select">
                            <option value="minutes">Minutes</option>
                            <option value="hours">Hours</option>
                            <option value="days">Days</option>
                        </select>
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label">Reason (optional)</label>
                    <textarea [ngModel]="banReason()" (ngModelChange)="banReason.set($event)" class="form-textarea"
                        rows="3" placeholder="Reason for banning this user..."></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" (click)="closeModals()">Cancel</button>
                <button class="btn btn-danger" (click)="executeBan()">Ban User</button>
            </div>
        </div>
    </div>

    <!-- Delete User Modal -->
    <div *ngIf="showDeleteModal()" class="modal-overlay" (click)="closeModals()">
        <div class="modal-content" (click)="$event.stopPropagation()">
            <div class="modal-header">
                <h3 class="modal-title">Delete User Account</h3>
                <button class="modal-close" (click)="closeModals()">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12">
                        </path>
                    </svg>
                </button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label">User</label>
                    <div class="user-info">
                        <strong>{{ selectedUser()?.username }}</strong> ({{ selectedUser()?.email }})
                    </div>
                </div>

                <div class="warning-box">
                    <svg class="warning-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z">
                        </path>
                    </svg>
                    <div class="warning-text">
                        <strong>Warning:</strong> This action will permanently delete the user account and all
                        associated data. This cannot be undone.
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label">Reason (required)</label>
                    <textarea [ngModel]="deleteReason()" (ngModelChange)="deleteReason.set($event)"
                        class="form-textarea" rows="3" placeholder="Reason for deleting this user account..."
                        required></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" (click)="closeModals()">Cancel</button>
                <button class="btn btn-danger" (click)="executeDelete()" [disabled]="!deleteReason().trim()">Delete
                    Account</button>
            </div>
        </div>
    </div>
</div>